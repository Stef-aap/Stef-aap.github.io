<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="author" content="Stef Mientki">
   <meta name="generator" content="Mozilla/4.7 [en-gb] (Win98; U) [Netscape]">
   <title>RCX_inside</title>
</head>
<body text="#000000" bgcolor="#FFFF00" link="#0000EE" vlink="#551A8B" alink="#FF0000">
&nbsp;
<table WIDTH="100%" >
<tr>
<td ALIGN=CENTER><a href="../lego_mindstorms_knex_index.html">Lego-Knex</a>
<br><a href="../../robbert/robbert_home.html">Robbert</a>
<br><a href="../../mattijs/mattijs_home.html">Mattijs</a>
<br><a href="mailto:s.mientki@ids.kun.nl"><img src="mail.gif" height=18 width=29></a></td>

<td ALIGN=CENTER><b><font size=+3>Lego RCX-Electronics Inside</font></b>
<br><font size=+2>Stef Mientki</font>
<br><font size=-1>januari 2001</font></td>

<td></td>
</tr>
</table>

<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td COLSPAN="2">
<center><b><font color="#3333FF">RCX sensor input</font></b></center>
</td>
</tr>

<tr>
<td ALIGN=CENTER><img src="sensor_input.gif" height=222 width=183>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="sensor_input3.gif" height=232 width=230>
<p><img src="sensor_input_and_modulation.jpg" height=226 width=467></td>

<td>If a touch sensor is selected, then Q1 is off.
<br>If a light or rotation sensor is selected, then Q1 is switch according
the figure below. This timing signal is synchronous for all 3 sensor inputs,
although the real sampling can't be synchronous. Therefore a sensor must
remain its value during the whole period of 0.1 msec.
<p>The sensed amplitude is determind by R1 and the sensor resistance which
divides the +5Volt power supply.
<br>Sensing is done when Q1 is off.
<p>About the value of R1, everyone agrees, R1=10 kOhm.
<br>About R2, you find different values.
<br>The best documented value was given me by Ted Hadley, who used the
Thevenin rule (find a load resistance that halves the output voltage, he
found 270 Ohm). I did the same measurement and found 300 Ohm, so that's
quiet alike.
<p>Because I wasn't satisfied with some earlier measurements I did, I simulated
a voltage source and a current source (see simulations below) and decided
a non-ideal current source of 20 mA / 600 Ohm was the best match.
<p>In designing sensors, you will try to keep the power comsumption as
low as possible. A resistor of 1 kOhm will draw about 7 mA, which should
be more than enough for most sensors.</td>
</tr>

<tr>
<td>
<center><img src="sensor_input1.gif" BORDER=0 height=174 width=418></center>
</td>

<td VALIGN=TOP><b><u><font color="#000000">Rload</font></u></b> = the load
resistance
<p><b><u>Vmeasured</u></b> = the measured voltage
<p><b><u>Imeasure</u></b> = Vmeasure / Rload
<p><b><u>Current Source</u></b> is a simulation with a current source of
20 mA / 600 Ohm.
<p><b><u>Voltage Source</u></b> is a simulation with a non-ideal voltage
source of 8V / 300 Ohm.</td>
</tr>

<tr>
<td>
<center><img src="sensor_input2.gif" BORDER=0 height=319 width=411></center>
</td>

<td VALIGN=CENTER>The measurements are not very accurate, due to bad measurement
equipment.
<p>But it can be seen that the current source simulation fits the measuements
better than the voltage source simulation.</td>
</tr>

<tr>
<td COLSPAN="2">
<center><b><font color="#3333FF">RCX motor output</font></b></center>
</td>
</tr>

<tr>
<td ALIGN=CENTER><img src="motor_modulator.jpg" height=197 width=138>
<p><img src="motor_modulation.jpg" height=123 width=310></td>

<td>The motor is in principle driven with 1 transistor or FET.
<br>To fully operate the motor in both directions ther will be of course
4 electronic switches.
<p>The timing is given below. You can measure this timing only by loading
the terminals with pure resistor (1 kOhm or so).
<br>If you connect the motor, you will see a almost contuous signal, due
to the emf of the motor.
<p>The speed of the motor is determined by the amount of time where Q1
is switched on, which varies from 1 to 8 times 0.9 msec.</td>
</tr>

<tr>
<td ALIGN=CENTER COLSPAN="2"><b><font color="#3333FF">RCX Touch Switch</font></b></td>
</tr>

<tr>
<td ALIGN=CENTER><img src="touch_sensor.jpg" height=194 width=161></td>

<td>The touch switch has probably a very bad switch in it, depending on
the pressure the resistance varies between more than 1 kOhm and 400 Ohm.</td>
</tr>

<tr>
<td ALIGN=CENTER COLSPAN="2"><b><font color="#3333FF">RCX Light Sensor</font></b></td>
</tr>

<tr>
<td>from the pictures from <a href="http://www.franweb.com/lego/">Frank
Angeli</a>
<br>LM358D
<br>10 uF
<br>about 6 transistors</td>

<td></td>
</tr>

<tr>
<td></td>

<td></td>
</tr>
</table>

<p>The RCX was powered by NiCd batteries, which were not fully loaded,
so the battery voltage was about 7 Volt.
<br>RCXcc was used to directly control the RCX. Strange effect was that
the battery level indicated by RCXcc was 7643 mV, which is far too much.
<br>Measurements were done with Gould scope en a separate voltmeter.
</body>
</html>
