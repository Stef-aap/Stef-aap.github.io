<HTML><HEAD><TITLE>ADS1211</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #E8E8E8;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
<link rel="icon" href="jalccring_small.gif" type="image/gif"></HEAD>
<BODY>

<P><SPAN class=RVTS1>ADS1211</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated by JALcc, from the JAL-sourcefile</SPAN></P>
<P><SPAN class=RVTS7>ads1211_libs.jal&nbsp;&nbsp; 05-08-2004</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Description&nbsp;</SPAN></P>
<P>Library for the control of the ADS1211&nbsp;</P>
<P>(4 channel, 24 bit ADC, 1 channel=16kHz, 4 channel=1kHz) with slight modifications also usable for the ADS1210, ADS1212, ADS1213&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Hardware settings should be done through a local copy of ADS1211_LIBS_INS&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Example&nbsp;</SPAN></P>
<P>;make local copy of ADS1211_LIBS_INS, edit paramaters, include in main program&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; include ADS1211_libs_ins&nbsp;</P>
<P>&nbsp;;reset ADC (multiple SPI devices assumed, so CS must be controled)&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_ADC0 = low&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; ADS1211_reset&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_ADC0 = high&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- read a 24 bit ADC value into ADS1211_dor2 . ADS1211_dor1 . ADS1211_dor0&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = low&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; ADS1211_read_ADC_24&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = high&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>License&nbsp;</SPAN></P>
<P>freeware, under the terms of the GNU GPL&nbsp;</P>
<P>Copyright (C) 2002 Stef Mientki&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="ads1211_libs.jal">download&nbsp; ads1211_libs.jal</A></P>
<P><A class=RVTS4 href="ads1211_libs_source.html">colorcoded HTML&nbsp; ads1211_libs_source.html</A></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 3.1&nbsp;&nbsp;&nbsp; ,04-06-2004, Stef Mientki&nbsp;</SPAN></P>
<P>- small improvements to the reset procedure&nbsp;</P>
<P>- 100 msec delay in reset replaced by wait for ready&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 3.0&nbsp;&nbsp;&nbsp; ,07-03-2003, Stef Mientki&nbsp;</SPAN></P>
<P>- Control through MSSP (besides USART) added&nbsp;</P>
<P>- pin names changed, so macro pin definitions can be used&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 2.0&nbsp;&nbsp;&nbsp; ,25-02-2003, Stef Mientki&nbsp;</SPAN></P>
<P>- Maximum SPI clockrate increased from Fin/5 to Fin/4&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp;&nbsp;&nbsp; ,29-02-2002, Stef Mientki&nbsp;</SPAN></P>
<P>- orginal release&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Included Files</SPAN></P>
<P>04-08-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="delay_20mc.jal">delay_20mc.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>05-08-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="rs232_hw.jal">rs232_hw.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>05-08-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="master_sync_ser_port.jal">master_sync_ser_port.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>18-10-2002&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="bit_calcs.jal">bit_calcs.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
<P><SPAN class=RVTS2>procedure ADS1211_wait_for_ready</SPAN></P>
<P>-- wait till rdy signal goes from high to low</P>
<P>-- so read and other commands can be synchronized</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_set_chan</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>-- and setups next channel</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_ADC_24_and_nextchan_fast</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>-- and setups next channel</P>
<P>-- all done in reversed order without waiting,</P>
<P>-- so this will only yield valid results</P>
<P>-- if SPI communication is faster than RDY pulse</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_ADC_24</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_OCR</SPAN></P>
<P>-- Read Offset Calibration Registers</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_FCR</SPAN></P>
<P>-- Read FullScale Calibration Registers</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_wakeup</SPAN></P>
<P>-- wake up ADC en set into normal mode</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_sleep</SPAN></P>
<P>-- put ADC into sleep mode</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_settings</SPAN></P>
<P>-- Starts the calibration cycle (and transports complete command register)</P>
<P>-- wait until ready,</P>
<P>-- then normal mode is automatically set, starting at channel ADS1211_chan</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_calibrate</SPAN></P>
<P>-- Starts the calibration cycle (and transports complete command register)</P>
<P>-- wait until ready,</P>
<P>-- then normal mode is automatically set, starting at channel 0</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_set_frequency</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_reset</SPAN></P>
<P>-- This procedure is able to reset the ADC in case the power-ON reset fails</P>
<P>--&nbsp;&nbsp;&nbsp; see page 30 of documentation</P>
<P>-- After reset, the calibration cycle is started</P>
<P>-- and then the normal mode will be entered</P>
</BODY></HTML>
