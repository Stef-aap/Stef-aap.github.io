<HTML><HEAD><TITLE>LCD control (HD44780)</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #E8E8E8;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
<link rel="icon" href="jalccring_small.gif" type="image/gif"></HEAD>
<BODY>

<P><SPAN class=RVTS1>LCD control (HD44780)</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated by JALcc, from the JAL-sourcefile</SPAN></P>
<P><SPAN class=RVTS7>hd44780_4.jal&nbsp;&nbsp; 10-09-2004</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Description&nbsp;</SPAN></P>
<P>Library for the control of an LCD module, controlled by HD44780 or equivalent. The routines are basically designed for a 2 line display, but with some slight modifications also usable for 1 and 4 line displays&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Hardware settings can be done through a local copy of HD44780_4_INS&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Because in general IO-lines are scarce, only 4 bit control of the LCD is implemented Cursor is always incremented (decrementing has no usefull meaning in western language)&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Example&nbsp;</SPAN></P>
<P>&nbsp;not available&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>License&nbsp;</SPAN></P>
<P>freeware, under the terms of the GNU GPL&nbsp;Copyright (C) 2002 Stef Mientki&nbsp;</P>
<P><A class=RVTS4 href="mailto:s.mientki@mailbox.kun.nl">mailto:S.Mientki@mailbox.kun.nl</A></P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="hd44780_4.jal">download&nbsp; hd44780_4.jal</A></P>
<P><A class=RVTS4 href="hd44780_4_source.html">colorcoded HTML&nbsp; hd44780_4_source.html</A></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.2&nbsp;&nbsp;&nbsp; ,01-09-2004, Stef Mientki&nbsp;</SPAN></P>
<P>- Extra delay in Init procedure, after 4-bits setting,&nbsp;</P>
<P>needed for VARITRONIX MDLS-16268-series&nbsp;</P>
<P>Problem was a uncomplete reset, after which the total behaviour was instable&nbsp;</P>
<P>- procedure LCD_init made explicitly available&nbsp;</P>
<P>- added: procedure value_to_LCD_10X_3pos&nbsp;</P>
<P>- added: procedure value_to_LCD_10X_4pos&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.1&nbsp;&nbsp;&nbsp; ,07-07-2004, Stef Mientki&nbsp;</SPAN></P>
<P>- Naming of io-pins changed, according JALcc macro definitions&nbsp;</P>
<P>- auto-initialisation now includes display clear and display of version&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp;&nbsp;&nbsp; ,29-03-2002, Stef Mientki&nbsp;</SPAN></P>
<P>- orginal release&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Included Files</SPAN></P>
<P>09-09-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="delay_20mc.jal">delay_20mc.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
<P><SPAN class=RVTS2>procedure LCD_shift_left</SPAN></P>
<P>-- shifts display (that is all lines) one position to the left</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_shift_right</SPAN></P>
<P>-- shifts display (that is all lines) one position to the right</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_char_pos</SPAN></P>
<P>-- writes charactes ASCII to the LCD at postion POS</P>
<P>-- positions refers to the oficial LCD position [ 0 .. 79 ],</P>
<P>--&nbsp;&nbsp; so writing to 0x42 in a 2*16 display, will write at the third position</P>
<P>--&nbsp;&nbsp; of the second line</P>
<P>-- therefore it's also possible to write outside the physical display</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_char_line_pos</SPAN></P>
<P>-- writes charactes ASCII to the LCD at postion POS on line LINE [0..1]</P>
<P>-- see also remarks for routine LCD_CHAR_POS</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_clear_line</SPAN></P>
<P>-- clears the selected line [0..1] and</P>
<P>-- sets the cursor at the start of that line</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_display_string</SPAN></P>
<P>-- Displays a complete string from a table on the LCD</P>
<P>-- writing to the LCD is started at the current cursor location</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_define_character</SPAN></P>
<P>-- definies a user character,</P>
<P>-- by copying the pixel definitions from a table to the character rom</P>
<P>-- table is definied in HD44780_INS.JAL</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_scroll_string_init</SPAN></P>
<P>-- Displays a scrolling string at the top line</P>
<P>-- the string is a normal string from one of the standard string tables</P>
<P>-- after calling init, LCD_SCROLL_STRING should be called on a regular base</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_scroll_string</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_animate1</SPAN></P>
<P>-- Animates a growing / decreasing stack (like a progress gauge)</P>
<P>-- should be called at regular intervals</P>
<P>-- Every time this routine is called, just one line is written to the character rom</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_animate2</SPAN></P>
<P>-- Animates a rotating line.</P>
<P>-- should be called at regular intervals</P>
<P>-- Every time this routine is called, all the character lines are written,</P>
<P>-- to save as much codespace as possible.</P>
<P>-- This animation uses a (partial) code table.</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_animate3</SPAN></P>
<P>-- Animates a smiley with a winking eye,</P>
<P>-- should be called at regular intervals (500 msec is a good interval)</P>
<P>-- Every time this routine is called, all the character lines are written,</P>
<P>-- to save as much codespace as possible.</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure value_to_LCD_10X_3pos</SPAN></P>
<P>-- Displays a value of 10X on 3 positions</P>
<P>-- 10X = 13&nbsp;&nbsp; will be displayed as "1.3"</P>
<P>-- 10X = 113&nbsp; will be displayed as " 11"</P>
<P>-- rounding is correctly handled</P>
<P>-- 10X = 115&nbsp; will be displayed as " 12"</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure value_to_LCD_10X_4pos</SPAN></P>
<P>-- Displays a value of 10X on 4 positions</P>
<P>-- 10X = 13&nbsp;&nbsp; will be displayed as " 1.3"</P>
<P>-- 10X = 113&nbsp; will be displayed as "11.3"</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure LCD_init</SPAN></P>
<P>-- Software reset / initialisation</P>
</BODY></HTML>
