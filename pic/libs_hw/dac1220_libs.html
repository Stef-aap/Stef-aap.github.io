<HTML><HEAD><TITLE>DAC1220</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #E8E8E8;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
<link rel="icon" href="jalccring_small.gif" type="image/gif"></HEAD>
<BODY>

<P><SPAN class=RVTS1>DAC1220</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated by JALcc, from the JAL-sourcefile</SPAN></P>
<P><SPAN class=RVTS7>dac1220_libs.jal&nbsp;&nbsp; 05-08-2004</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Description&nbsp;</SPAN></P>
<P>Library for the control of the DAC1220 (20 bit DAC) with slight modifications also usable for the DAC1221 (16 bit DAC, 3V !!)&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Hardware settings should be done through a local copy of DAC1220_LIBS_INS&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Data is transported through the variable&nbsp;</P>
<P>DAC1220_dir = DAC1220_dir3 . DAC1220_dir2 . DAC1220_dir1&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Example DAC1220&nbsp;</SPAN></P>
<P>&nbsp;-- make local copy of DAC1220_LIBS_INS, edit paramaters, include in main program&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; include dac1220_libs_ins&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- reset DAC (multiple SPI devices assumed, so CS must be controled)&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = low&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_reset&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = high&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- set a 20 bit DAC value (from x = X3 . x2 . x1 )&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_dir3 = x3&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_dir2 = x2&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_dir1 = x1&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = low&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_set_DAC_24&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = high&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- set a 16 bit DAC value (from x = x3 . x2 )&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_dir3 = x3&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_dir2 = x2&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = low&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; DAC1220_set_DAC_16&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = high&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>License&nbsp;</SPAN></P>
<P>freeware, under the terms of the GNU GPL&nbsp;</P>
<P>Copyright (C) 2002 Stef Mientki&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="dac1220_libs.jal">download&nbsp; dac1220_libs.jal</A></P>
<P><A class=RVTS4 href="dac1220_libs_source.html">colorcoded HTML&nbsp; dac1220_libs_source.html</A></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp; 29-02-2002, Stef Mientki&nbsp;</SPAN></P>
<P>-&nbsp; orginal release&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Included Files</SPAN></P>
<P>04-08-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="delay_20mc.jal">delay_20mc.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>05-08-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="rs232_hw.jal">rs232_hw.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
<P><SPAN class=RVTS2>procedure DAC1220_read_DAC_24</SPAN></P>
<P>-- Read 24 bits DAC value into DAC1220_dir</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_set_DAC_16</SPAN></P>
<P>-- SET DAC with the (new) 16-bit value from DAC1220_dir</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_set_DAC_24</SPAN></P>
<P>-- SET DAC with the (new) 24-bit value from DAC1220_dir</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_read_cmd</SPAN></P>
<P>-- read command registers from DAC</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_wakeup</SPAN></P>
<P>-- wake up DAC en set into normal mode</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_sleep</SPAN></P>
<P>-- put DAC into sleep mode</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_calibrate</SPAN></P>
<P>-- Starts the calibration cycle (and transports complete command register)</P>
<P>-- wait till it's finished</P>
<P>-- after which normal mode will be set</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>procedure DAC1220_reset</SPAN></P>
<P>-- This procedure is able to reset the DAC in case the power-ON reset fails</P>
<P>--&nbsp;&nbsp;&nbsp; see page 10 of documentation</P>
<P>-- After reset, the calibration cycle is started</P>
<P>-- and then the normal mode will be entered</P>
</BODY></HTML>
