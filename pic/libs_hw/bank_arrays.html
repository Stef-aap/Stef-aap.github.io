<HTML><HEAD><TITLE>Arrays in JAL</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #E8E8E8;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
<link rel="icon" href="jalccring_small.gif" type="image/gif"></HEAD>
<BODY>

<P><SPAN class=RVTS1>Arrays in JAL</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated by JALcc, from the JAL-sourcefile</SPAN></P>
<P><SPAN class=RVTS7>bank_arrays.jal&nbsp;&nbsp; 04-08-2004</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Description&nbsp;</SPAN></P>
<P>Library for the control of arrays in all banks&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>The array pointers are stores at the highest RAM locations (=common to all banks), ensuring the indices will be available in all banks.&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>After reading or writing a specific array location, the pointer is set to the next element of the array.&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>If constant ARRAY_CHECK_INDICES is true, the array index is tested to be valid, this check is not full proof, because all calculations are done modula 256. But the check will ensure that never will be written outside the array. If the test fails, the value is written to the last element in the array.&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Example Array usage&nbsp;</SPAN></P>
<P>&nbsp;-- ----------------------------------------------------------------------------&nbsp;</P>
<P>&nbsp;-- these constants are meant to define arrays in all of the banks&nbsp;</P>
<P>&nbsp;-- if array not wished, define endpointer smaller than startpointer&nbsp;</P>
<P>&nbsp;--&nbsp;</P>
<P>&nbsp;-- If constant ARRAY_CHECK_INDICES is true, the array index is tested to be valid,&nbsp;</P>
<P>&nbsp;-- this check is not full proof, because all calculations are done modula 256.&nbsp;</P>
<P>&nbsp;-- But the check will ensure that never will be written outside the array.&nbsp;</P>
<P>&nbsp;-- If the test fails, the value is written to the last element in the array.&nbsp;</P>
<P>&nbsp;-- ----------------------------------------------------------------------------&nbsp;</P>
<P>&nbsp;const array_check_indices = false&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;const array0_start = 0x70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- no array in bank 0 wanted&nbsp;</P>
<P>&nbsp;const array0_end&nbsp;&nbsp; = 0x6F&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --&nbsp;&nbsp; so make end-index smaller than start_index&nbsp;</P>
<P>&nbsp;const array1_start = 0xA0&nbsp;</P>
<P>&nbsp;const array1_end&nbsp;&nbsp; = 0xEF&nbsp;</P>
<P>&nbsp;const array2_start = 0x120&nbsp;</P>
<P>&nbsp;const array2_end&nbsp;&nbsp; = 0x14F&nbsp;</P>
<P>&nbsp;const array3_start = 0x1F1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 16F628 doesn't have free registers in bank 3&nbsp;</P>
<P>&nbsp;const array3_end&nbsp;&nbsp; = 0x1F0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --&nbsp;&nbsp; so make end-index smaller than start_index&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- Usage(through pseudo vars):&nbsp;</P>
<P>&nbsp;array1_index = 0&nbsp;</P>
<P>&nbsp;array1 = 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; array1 [ 0 ] = 23&nbsp; (and array1_index = 1)&nbsp;</P>
<P>&nbsp;array1 = 56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; array1 [ 1 ] = 56&nbsp; (and array1_index = 2)&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;array1_index = 5&nbsp;</P>
<P>&nbsp;x = array1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; x = array1 [ 5 ]&nbsp; (and array1_index = 6)&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>License&nbsp;</SPAN></P>
<P>freeware, under the terms of the GNU GPL&nbsp;</P>
<P>Copyright (C) 2002 Stef Mientki&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="bank_arrays.jal">download&nbsp; bank_arrays.jal</A></P>
<P><A class=RVTS4 href="bank_arrays_source.html">colorcoded HTML&nbsp; bank_arrays_source.html</A></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version 2.1, 29-11-2003, Stef Mientki&nbsp;</SPAN></P>
<P>- if interrupts were used, array-pointer at 0x7F was destroyed&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version 2.0, 10-04-2003, Stef Mientki&nbsp;</SPAN></P>
<P>- if index too large it's set to 0, so always within the array bounds&nbsp;</P>
<P>- different indices for read and write&nbsp;</P>
<P>- auto init, set all indices at start&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P>Author : Stef Mientki&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp; 17-03-2002,&nbsp; Stef Mientki&nbsp;</SPAN></P>
<P>-&nbsp; orginal release&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Included Files</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
</BODY></HTML>
