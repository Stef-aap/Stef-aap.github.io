<HTML><HEAD><TITLE>8 PWM signals</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #E8E8E8;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
<link rel="icon" href="jalccring_small.gif" type="image/gif"></HEAD>
<BODY>

<P><SPAN class=RVTS1>8 PWM signals</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated by JALcc, from the JAL-sourcefile</SPAN></P>
<P><SPAN class=RVTS7>pwm_motor.jal&nbsp;&nbsp; 07-08-2004</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Description&nbsp;</SPAN></P>
<P>Library that can control up to 8 pwm-signals (i.e. 8 motors). uses&nbsp;&nbsp; : TMR0 as interrupt generator&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Example pwm motors&nbsp;</SPAN></P>
<P>&nbsp;-- define which motors will be available (motor1 = bit0 etc)&nbsp;</P>
<P>&nbsp;const pwm_motors = 0b_0000_0011&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- define to which pin each motor is connected,&nbsp;</P>
<P>&nbsp;-- all 8 motor-pins must be definied,&nbsp;</P>
<P>&nbsp;-- if motors are not avalaible, just define it to a valid io-pin&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm1_pin = pin_b0&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm2_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm3_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm4_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm5_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm6_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm7_pin = pin_b1&nbsp;</P>
<P>&nbsp;&lt;mac&gt; io_pin&nbsp; pwm8_pin = pin_b1&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- include the motor library&nbsp;</P>
<P>&nbsp;include pwm_motor&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- calculate and set TMR0, to the desired resolution of the PWM&nbsp;</P>
<P>&nbsp;&lt;mac&gt; TMR0 20, 1000&nbsp; ;Xtal=20 MHz , period=1 msec&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- now the interrupt procedure should be called if T0IF is set,&nbsp;</P>
<P>&nbsp;-- the easyist way of doing this by the macro statement "interrupt_main"&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;-- now motors an be controled by just setting&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; pwm1_period_preset = 10&nbsp;&nbsp;&nbsp; ;the total period time&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; pwm1_active_preset = 5&nbsp;&nbsp;&nbsp;&nbsp; ;the active time&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; -- ------------------------------------------&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; -- period / active = 10 / 0&nbsp;&nbsp;&nbsp; means 0%&nbsp;&nbsp; high&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; -- period / active = 10 / 1&nbsp;&nbsp;&nbsp; means 10%&nbsp; high&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; -- ....&nbsp;</P>
<P>&nbsp;--&nbsp;&nbsp;&nbsp;&nbsp; -- period / active = 10 / 10&nbsp;&nbsp; means 100% high&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>License&nbsp;</SPAN></P>
<P>freeware, under the terms of the GNU GPL&nbsp;</P>
<P>Copyright (C) 2002 Stef Mientki&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="pwm_motor.jal">download&nbsp; pwm_motor.jal</A></P>
<P><A class=RVTS4 href="pwm_motor_source.html">colorcoded HTML&nbsp; pwm_motor_source.html</A></P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp; 14-09-2002&nbsp;&nbsp; Stef Mientki&nbsp;</SPAN></P>
<P>- orginal release&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS2>Included Files</SPAN></P>
<P>&nbsp;&nbsp;</P>
<P>&nbsp;&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
<P><SPAN class=RVTS2>procedure pwm_motor_init</SPAN></P>
<P>-- initializes all output pins used for the motors</P>
<P>-- this procedure is automatic called by the include of this library</P>
<P>-- and should rarely be called be the user</P>
</BODY></HTML>
