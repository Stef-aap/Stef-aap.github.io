<HTML><HEAD><TITLE>JAL library for control of the ADS1211</TITLE>
<STYLE type="text/css"><!--
BODY {
  margin: 5px 5px 5px 5px;
  background-color: #FF8000;
}

--></STYLE>
<LINK type="text/css" href="rvf.css" rel=STYLESHEET>
</HEAD>
<BODY>

<P><SPAN class=RVTS1>JAL library for control of the ADS1211</SPAN></P>
<P><SPAN class=RVTS7>This html document is automatically generated from the JAL-sourcefile by JALcc</SPAN></P>
<P><SPAN class=RVTS7>ads1211_libs.jal&nbsp;&nbsp; 11-07-2004</SPAN></P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>License</SPAN></P>
<P>freeware, under the terms of the GNU GPLCopyright (C) 2002 Stef Mientki</P>
<P><A class=RVTS4 href="mailto:s.mientki@mailbox.kun.nl">mailto:S.Mientki@mailbox.kun.nl</A></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS1>Version History</SPAN></P>
<P><A class=RVTS4 href="../download/jal_libs/ads1211_libs.jal">download&nbsp; ads1211_libs.jal</A></P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>Version: 3.1&nbsp;&nbsp;&nbsp; ,04-06-2004, Stef Mientki</SPAN></P>
<P>- small improvements to the reset procedure</P>
<P>- 100 msec delay in reset replaced by wait for ready</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>Version: 3.0&nbsp;&nbsp;&nbsp; ,07-03-2003, Stef Mientki</SPAN></P>
<P>- Control through MSSP (besides USART) added</P>
<P>- pin names changed, so macro pin definitions can be used</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>Version: 2.0&nbsp;&nbsp;&nbsp; ,25-02-2003, Stef Mientki</SPAN></P>
<P>- Maximum SPI clockrate increased from Fin/5 to Fin/4</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>Version: 1.0&nbsp;&nbsp;&nbsp; ,29-02-2002, Stef Mientki</SPAN></P>
<P>- orginal release</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS1>Introduction</SPAN></P>
<P><SPAN class=RVTS2>Description</SPAN></P>
<P>Library for the control of the ADS1211</P>
<P>(4 channel, 24 bit ADC, 1 channel=16kHz, 4 channel=1kHz)with slight modifications also usable for the ADS1210, ADS1212, ADS1213</P>
<P>&nbsp;</P>
<P>Hardware settings should be done through a local copy of ADS1211_LIBS_INS</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>Example</SPAN></P>
<P>&nbsp;</P>
<P>;make local copy of ADS1211_LIBS_INS, edit paramaters, include in main program</P>
<P>&nbsp;&nbsp;&nbsp; include ADS1211_libs_ins</P>
<P>&nbsp;</P>
<P>;reset ADC (multiple SPI devices assumed, so CS must be controled)</P>
<P>&nbsp;&nbsp;&nbsp; CS_ADC0 = low</P>
<P>&nbsp;&nbsp;&nbsp; ADS1211_reset</P>
<P>&nbsp;&nbsp;&nbsp; CS_ADC0 = high</P>
<P>&nbsp;</P>
<P>;read a 24 bit ADC value into ADS1211_dor2 . ADS1211_dor1 . ADS1211_dor0</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = low</P>
<P>&nbsp;&nbsp;&nbsp; ADS1211_read_ADC_24</P>
<P>&nbsp;&nbsp;&nbsp; CS_DAC0 = high</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS1>Included Files</SPAN></P>
<P>11-11-2003&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="../download/jal_libs/delay_20mc.jal">delay_20Mc.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>11-11-2003&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="../download/jal_libs/rs232_hw.jal">rs232_hw.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>07-07-2004&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="../download/master_sync_ser_port.jal">master_sync_ser_port.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>18-10-2002&nbsp;&nbsp;&nbsp;<A class=RVTS4 href="../download/bit_calcs.jal">bit_calcs.jal</A>&nbsp;&nbsp;&nbsp; d:\pic-tools\jal\lib\</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS1>Public Procedures</SPAN></P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_wait_for_ready</SPAN></P>
<P>-- wait till rdy signal goes from high to low</P>
<P>-- so read and other commands can be synchronized</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_set_chan ( byte in chan )</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>-- and setups next channel</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_ADC_24_and_nextchan_fast ( byte in chan )</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>-- and setups next channel</P>
<P>-- all done in reversed order without waiting,</P>
<P>-- so this will only yield valid results</P>
<P>-- if SPI communication is faster than RDY pulse</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_ADC_24</SPAN></P>
<P>-- Read 24 bits DAC value into ADS1211_dor</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_OCR</SPAN></P>
<P>-- Read Offset Calibration Registers</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_read_FCR</SPAN></P>
<P>-- Read FullScale Calibration Registers</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_wakeup</SPAN></P>
<P>-- wake up ADC en set into normal mode</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_sleep</SPAN></P>
<P>-- put ADC into sleep mode</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_settings</SPAN></P>
<P>-- Starts the calibration cycle (and transports complete command register)</P>
<P>-- wait until ready,</P>
<P>-- then normal mode is automatically set, starting at channel ADS1211_chan</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_calibrate</SPAN></P>
<P>-- Starts the calibration cycle (and transports complete command register)</P>
<P>-- wait until ready,</P>
<P>-- then normal mode is automatically set, starting at channel 0</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_set_frequency (byte in freq)</SPAN></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><SPAN class=RVTS2>procedure ADS1211_reset</SPAN></P>
<P>-- This procedure is able to reset the ADC in case the power-ON reset fails</P>
<P>--&nbsp;&nbsp;&nbsp; see page 30 of documentation</P>
<P>-- After reset, the calibration cycle is started</P>
<P>-- and then the normal mode will be entered</P>
</BODY></HTML>
