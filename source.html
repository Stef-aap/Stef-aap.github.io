<HTML>

<HEAD>

<TITLE>Java Boutique, The Ultimate Java Applet Resource - Graph</TITLE>

<META name="keywords" CONTENT="Java, applets, java applets, free applets, Java Boutique, internet programming, java programming, programming, developer, developer.com, gamelan.com, ActiveX, java resources, Java source, Java code, Applets, Java applets, applet collection">

<META name="description" CONTENT="The Java Boutique is a collection of applets that you can put on your own pages. It also features Java news, links to other Java resources, and more.">

<LINK rel=STYLESHEET href="/style/jb.css" Type="text/css">

</HEAD>



<BODY bgcolor="#ffffff" text="#000000" link="#cc0000" vlink="#990000">



<table width=640>

<tr>

<TD VALIGN=TOP ALIGN=LEFT WIDTH=140>



<!------------------Logos---------------------->



<A href="http://www.internet.com"><IMG src="http://www.internet.com/img/icom-logo-micro.gif" BORDER=0 WIDTH=130 HEIGHT=28 ALT="internet.com logo"></A>

<a href="http://javaboutique.internet.com"><IMG src="/img/javabtq.gif" BORDER="0" WIDTH=127 HEIGHT=95 ALT="The Java Boutique"></a><br>

<BR>

<!--------------NAV BARS------------------------>



<table width="90%" cellpadding="2" cellspacing="2" border="0">
<TR VALIGN="TOP" BGCOLOR="#BBBBBB"><TD ALIGN="CENTER"><B>&nbsp;<A href="/applets/"><FONT COLOR="#000000" STYLE="font-size: 11pt;">APPLETS</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/cathome.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">by Category</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/bydate/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">by Date</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/applet_index/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">by name</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/stats/halloffame.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Hall of Fame</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/stats/archive.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Archive</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/submit.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Submit</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/javasource/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Source Code</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/servlets/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Servlets and JSP</FONT></A></B></TD></TR>

<TR VALIGN="TOP" BGCOLOR="#BBBBBB"><TD ALIGN="CENTER"><B>&nbsp;<A href="/articles/"><FONT COLOR="#000000" STYLE="font-size: 11pt;">ARTICLES</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/tutorials/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Tutorials</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/reviews/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Reviews</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/how_to/glossary.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Glossary</FONT></A></B></TD></TR>

<TR VALIGN="TOP" BGCOLOR="#BBBBBB"><TD ALIGN="CENTER"><B>&nbsp;<A href="/forum/"><FONT COLOR="#000000" STYLE="font-size: 11pt;">FORUM</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/forum/faq.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">FAQ</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/forum/poll.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Users Poll</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="http://forums.internet.com/?13@^309844@.ee77521"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Discussion Group</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/contact.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Contact Us</FONT></A></B></TD></TR>

<TR VALIGN="TOP" BGCOLOR="#BBBBBB"><TD ALIGN="CENTER"><B>&nbsp;<A href="/resources/"><FONT COLOR="#000000" STYLE="font-size: 11pt;">OTHER RESOURCES</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/resources/custom.html"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Custom Applets</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/resources/javaatwork/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Java@Work</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/news/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Java News</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="/jini/"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Jini Watch</FONT></A></B></TD></TR>
<TR VALIGN="TOP" BGCOLOR="#DDDDDD"><TD><B> <A href="http://www.myaffiliateprogram.com/u/referit/t.asp?id=1014"><FONT COLOR="#000000" STYLE="font-size: 10pt;">Affiliate Programs</FONT></A></B></TD></TR>

<TR VALIGN="TOP" BGCOLOR="#BBBBBB"><TD ALIGN="CENTER">
<!-- SEARCH FORM -->
  <FORM METHOD="POST" ACTION="http://search.internet.com/cgi-bin/search.javaboutique.com">
      <INPUT TYPE="HIDDEN" name="method" VALUE="mainQuery">
      <INPUT TYPE="HIDDEN" name="querysummarycb" VALUE="querysummary">
      <INPUT TYPE="HIDDEN" name="numresults" value="0">
      <INPUT TYPE="HIDDEN" name="batchhits" value="10">
      <input type="hidden" name="db6" value="JB">
	  <INPUT TYPE="text"   name="query" VALUE="" SIZE="10">
      <INPUT TYPE="SUBMIT" name="submit" VALUE="Search the JB">
  </FORM>
<!-- END OF SEARCH FORM -->
<A href="/stats/searches.html"><FONT COLOR="000000"><B>Top Searches</B></FONT></A>
<BR><A href="/network/">chat</A> - 
<A href="/utilities/counter.html">counter</A><BR>
<A href="/navigation/menu.html">menu</A> - 
<A href="/utilities/time.html">countdown</A>
</TD></TR>
</TABLE>
<BR>










<!-- --------INTERNET.COM TOOLBAR-------- -->
<TABLE WIDTH="90%" BORDER="0" CELLSPACING="0" BGCOLOR="#003300">
<TR>
<TD WIDTH="100%" VALIGN="TOP">

<TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="6" BORDER="0">
<TR>
<TD BGCOLOR="#003300" WIDTH="100%" ALIGN="CENTER">
<FONT SIZE=-1 COLOR="#FFFFFF" FACE="ARIAL, HELVETICA"><B>internet.com</B></FONT>
</TD>
</TR>
<TR>
<TD BGCOLOR="#cccccc">
<FONT  FACE="arial,helvetica" SIZE="-2" style="font-size: 8pt;">
<A href="http://redir.internet.com/jb/icominc_1/www.internet.com/sections/news.html">Internet News</A><BR>
<A href="http://redir.internet.com/jb/icominc_2/www.internet.com/sections/stocks.html">Internet Stocks/VC</A><BR>
<A href="http://redir.internet.com/jb/icominc_3/www.internet.com/sections/it.html">Internet Technology</A><BR>
<A href="http://redir.internet.com/jb/icominc_4/www.internet.com/sections/win.html">Windows Internet Tech.</A><BR>
<A href="http://redir.internet.com/jb/icominc_5/www.internet.com/sections/linux.html">Linux/Open Source</A><BR>
<A href="http://redir.internet.com/jb/icominc_6/www.internet.com/sections/webdev.html">Web Developer</A><BR>
<A href="http://redir.internet.com/jb/icominc_7/www.internet.com/sections/marketing.html">E-Commerce/Marketing</A><BR>
<A href="http://redir.internet.com/jb/icominc_8/www.internet.com/sections/isp.html">ISP Resources</A><BR>
<A href="http://redir.internet.com/jb/icominc_9/www.internet.com/sections/downloads.html">Downloads</A><BR>
<A href="http://redir.internet.com/jb/icominc_10/www.internet.com/sections/resources.html">Internet Resources</A><BR>
<A href="http://redir.internet.com/jb/icominc_11/www.internet.com/sections/lists.html">Internet Lists</A><BR>
<A href="http://redir.internet.com/jb/icominc_12/www.internet.com/sections/international.html">International</A><BR>
<BR>
<A href="http://redir.internet.com/jb/icominc_13/search.internet.com">Search internet.com</A><BR>
<A href="http://redir.internet.com/jb/icominc_14/www.internet.com/mediakit/">Advertising Info</A><BR>
<A href="http://redir.internet.com/jb/icominc_15/www.internet.com/corporate/">Corporate Info</A><BR>
<A href="http://redir.internet.com/jb/icominc_16/events.internet.com">Internet Trade Shows</A><BR>
</FONT>
</TD>
</TR>
</TABLE>

</TD>
</TR>
</TABLE>
<!-- =====INTERNET.COM TOOLBAR===== -->
<P>
<!-- =====INTERNET.COMMERCE===== -->
<TABLE WIDTH="90%" BORDER="0" CELLSPACING="0" BGCOLOR="#003300">
<TR>
<TD WIDTH="100%" VALIGN="TOP">

<TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="6" BORDER="0">
<TR>
<TD BGCOLOR="#003300" WIDTH="100%" ALIGN="CENTER">
<FONT SIZE=-1 COLOR="#FFFFFF" FACE="ARIAL, HELVETICA"><B>internet.commerce</B></FONT>
</TD>
</TR>
<TR>
<TD BGCOLOR="#cccccc">
<FONT  FACE="arial,helvetica" SIZE="-2" style="font-size: 8pt;">
<a href="http://www.internet.com/partners/">Be a Commerce Partner</A><BR>
<a href="/event.ng/Type=click&ProfileID=921&RunID=6226&AdID=2553&TagValues=221.222.778.981&FamilyID=1&GroupID=1&Redirect=http://ru.domainbank.net/refer.cfm%3frefer=iw1000" target="_top">Register Domains</a><BR>
<a href="/event.ng/Type=click&ProfileID=922&RunID=6292&AdID=3687&TagValues=221.222.778.982&FamilyID=1&GroupID=1&Redirect=http://links.verza.com/cgi-bin/mlic?eu=102743" target="_top">Accept Credit Cards</a><BR>
<a href="/event.ng/Type=click&ProfileID=923&RunID=6254&AdID=2547&TagValues=221.222.778.983&FamilyID=1&GroupID=1&Redirect=http://www.mapquest.com/cgi-bin/ia_find%3flink=/b2b/b2b_homepage" target="_top">Map Your Website</a><BR>
<a href="/event.ng/Type=click&ProfileID=924&RunID=6259&AdID=3220&TagValues=221.222.778.984&FamilyID=1&GroupID=1&Redirect=http://www.netsanity.com/cgi-bin/download.cgi%3fPID=INTE01" target="_top">News to Your Desktop</a><BR>
<a href="/event.ng/Type=click&ProfileID=925&RunID=6239&AdID=2558&TagValues=221.222.778.985&FamilyID=1&GroupID=1&Redirect=http://www.exp.com/Affiliates%3ftoken=internet.com-u-c&cat_id=7" target="_top">Expert Tech Advice</a><BR>
<a href="/event.ng/Type=click&ProfileID=926&RunID=6223&AdID=2559&TagValues=221.222.778.986&FamilyID=1&GroupID=1&Redirect=http://www.cyveillance.com/link/internet.asp" target="_top">Get e-Biz Intell.</a><BR>
<a href="/event.ng/Type=click&ProfileID=927&RunID=6946&AdID=4894&TagValues=221.222.778.987&FamilyID=1&GroupID=1&Redirect=http://www.internet.com/affiliates" target="_top">New Affiliate Program</a><BR>
<a href="/event.ng/Type=click&ProfileID=928&RunID=6248&AdID=3935&TagValues=221.222.778.988&FamilyID=1&GroupID=1&Redirect=http://www.freediskspace.com" target="_top">Free Disk Space</a><BR>
<a href="/event.ng/Type=click&ProfileID=929&RunID=6289&AdID=4014&TagValues=221.222.778.989&FamilyID=1&GroupID=1&Redirect=http://www.tophosts.com/" target="_top">Find a Web Host</a><BR>
<a href="/event.ng/Type=click&ProfileID=930&RunID=6509&AdID=4594&TagValues=221.222.778.990&FamilyID=1&GroupID=1&Redirect=http://www.software.internet.com" target="_top">Software Specials</a><BR>
<!--
<A href="http://www.internet.com/partners/index.html">Be a Commerce Partner</A><BR>
<A href="http://software.internet.com/">Software Store</A><BR>
<A href="http://www.nowonder.com/enter/doorway/INTERNETCOM1">Computer Help</A><BR>
<A href="http://ru.domainbank.net/refer.cfm?refer=iw1000">Register Domains</A><BR>
<A href="http://jobs.internet.com/">Internet Jobs</A><BR>
<A href="http://www.mapquest.com/cgi-bin/ia_find?link=/b2b/b2b_homepage">Map Your Website</A><BR>
<A href="http://www.internet.com/postmaster.html">Rent E-mail Lists</A><BR>
<A href="http://www.fatbrain.com/home.html?from=YEJ244">Bookstore</A><BR>
<A href="http://www.newsbureau.com">Press Release dist.</A><BR>
<A href="http://www.allnetresearch.com/">Internet Research</A><BR>
<A href="http://www.internet.comvc.com/">Venture Capital</A><BR>
<A href="http://www.newslinx.com/4linxinfo.html">Web Publishing</A><BR>
<A href="http://www.planet-intra.com/">Build Your Intranet</A><BR>
<A href="http://www.exp.com/Affiliates?token=internet.com-u-c&cat_id=7">Ask an Expert</A><BR>
<A href="http://www.cyveillance.com/link/internet.asp">Get e-Biz Intell.</A><BR>
<A href="http://www.screamingmedia.net/alliance/internet.html">Content for Websites</A><BR>
<A href="http://2000.411now.net/partners/reseller_pgs/transition.htm">Income for Small Biz</A><BR>
<A href="http://www.iraves.com/">Address Verification</A><BR>
<A href="http://promo.nexchange.com/1457.asp">Build Sticky eStores</A><BR>
<A href="http://www.directcoupons.com/advertise.html">Advertise a Coupon</A><BR>
<A href="http://www.epromos.com">Promotional Products</A><BR>
<A href="http://www.internetact.com">Accept Credit Cards</A><BR>
<A href="http://www.netzip.com/products/Info_Demon.html">Download Solutions</A><BR>
<A href="http://www.dxstorm.com/dxsites2/dxshop/internet.mhtml?code=a19991124-ic3&id=1172">Create a Web Store</A><BR>
<A href="http://www.fax4free.com">fax & vmail for free</A><BR>
<A href="http://www.telekomnet.com/">Hardware Store</A><BR>
<A href="http://www.redgorilla.com/internetcom/index.html">Track Time & Expenses</A><BR>
<A href="http://www.netsanity.com">News to Your Desktop</A><BR>
<A href="http://www.mondus.com">Small Biz Purchasing</A><BR>
<A href="http://www.b2bexplorer.com/index_internet.html">B2B Directory/Search</A><BR>
<A href="http://www.internet.workexchange.com/">Freelancers</A><BR>
-->
</TD>
</TR>
</TABLE>

</TD>
</TR>
</TABLE>
<!-- =====INTERNET.COMMERCE===== -->
<P>
<!-- =====Webdeveloper Network===== -->
<TABLE WIDTH="90%" BORDER="0" CELLSPACING="0" BGCOLOR="#003300">
<TR>
<TD WIDTH="100%" VALIGN="TOP">

<TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="6" BORDER="0">
<TR>
<TD BGCOLOR="#003300" WIDTH="100%" ALIGN="CENTER">
<FONT SIZE=-1 COLOR="#FFFFFF" FACE="ARIAL, HELVETICA"><B>WebDeveloper Network</B></FONT>
</TD>
</TR>
<TR>
<TD BGCOLOR="#cccccc">
<FONT  FACE="arial,helvetica" SIZE="-2" style="font-size: 8pt;">
<A href="http://browserwatch.internet.com">BrowserWatch</A><BR>
<A href="http://forums.internet.com">Developer Forums</A><BR>
<A href="http://internetnews.com/wd-news/">Developer News</A><BR>
<A href="http://javaboutique.internet.com">JavaBoutique</A><BR>
<A href="http://javascriptsource.com/">JavaScriptSource</A><BR>
<A href="http://www.scriptsearch.com">ScriptSearch</A><BR>
<A href="http://SearchEngineWatch.com">SearchEngineWatch</A><BR>
<A href="http://streamingmediaworld.com">StreamingMediaWorld</A><BR>
<A href="http://wdvl.com">The WDVL</A><BR>
<A href="http://WebDeveloper.com">WebDeveloper.com</A><BR>
<A href="http://www.WebDevelopersJournal.com">WebDevelopersJournal</A>
<A href="http://webreference.com">WebReference.com</A><BR>
<A href="http://xmlfiles.com">The XML Files</A><BR>
</FONT>
</TD>
</TR>
</TABLE>

</TD>
</TR>
</TABLE>
<!-- END WD Network TOOLBAR -->

&nbsp;<FONT SIZE=-2>[ <I>Looking for a <A href="/sitemap.html">Site Map?</A></I> ]

</FONT>

</td>



<td valign=top width=520>





<!--------------Ad position "A"-------------------->

<center>



<a target="_blank" href="/event.ng/Type=click&ProfileID=436&RunID=6780&AdID=4788&TagValues=194.208.222.249.313.572.579.619.915&FamilyID=1&GroupID=7&Redirect=http://www.unclaimeddomains.com"><img src="/ads/2000/05/unclaimed-468.gif" border=0 height=60 width=468 alt=""></a>

</center><p>

<!--------------Ad position "A"-------------------->





<table border=0 CELLPADDING=5>

   <TR VALIGN="TOP">

     <TD>



<CENTER>

<H1>Graph</H1>

</CENTER>

<HR>

<PRE>



import java.util.*;

import java.awt.*;

import java.applet.Applet;



class Node {

    double x;

    double y;



    double dx;

    double dy;



    boolean fixed;



    String lbl;

}



class Edge {

    int from;

    int to;



    double len;

}



class GraphPanel extends Panel implements Runnable {

    Graph graph;

    int nnodes;

    Node nodes[] = new Node[100];



    int nedges;

    Edge edges[] = new Edge[200];



    Thread relaxer;

    boolean stress;

    boolean random;



    GraphPanel(Graph graph) {

	this.graph = graph;

    }



    int findNode(String lbl) {

	for (int i = 0 ; i &lt; nnodes ; i++) {

	    if (nodes[i].lbl.equals(lbl)) {

		return i;

	    }

	}

	return addNode(lbl);

    }

    int addNode(String lbl) {

	Node n = new Node();

	n.x = 10 + 380*Math.random();

	n.y = 10 + 380*Math.random();

	n.lbl = lbl;

	nodes[nnodes] = n;

	return nnodes++;

    }

    void addEdge(String from, String to, int len) {

	Edge e = new Edge();

	e.from = findNode(from);

	e.to = findNode(to);

	e.len = len;

	edges[nedges++] = e;

    }



    public void run() {

	while (true) {

	    relax();

	    if (random && (Math.random() &lt; 0.03)) {

		Node n = nodes[(int)(Math.random() * nnodes)];

		if (!n.fixed) {

		    n.x += 100*Math.random() - 50;

		    n.y += 100*Math.random() - 50;

		}

		graph.play(graph.getCodeBase(), "audio/drip.au");

	    }

	    try {

		Thread.sleep(100);

	    } catch (InterruptedException e) {

		break;

	    }

	}

    }



    synchronized void relax() {

	for (int i = 0 ; i &lt; nedges ; i++) {

	    Edge e = edges[i];

	    double vx = nodes[e.to].x - nodes[e.from].x;

	    double vy = nodes[e.to].y - nodes[e.from].y;

	    double len = Math.sqrt(vx * vx + vy * vy);

	    double f = (edges[i].len - len) / (len * 3) ;

	    double dx = f * vx;

	    double dy = f * vy;



	    nodes[e.to].dx += dx;

	    nodes[e.to].dy += dy;

	    nodes[e.from].dx += -dx;

	    nodes[e.from].dy += -dy;

	}



	for (int i = 0 ; i &lt; nnodes ; i++) {

	    Node n1 = nodes[i];

	    double dx = 0;

	    double dy = 0;



	    for (int j = 0 ; j &lt; nnodes ; j++) {

		if (i == j) {

		    continue;

		}

		Node n2 = nodes[j];

		double vx = n1.x - n2.x;

		double vy = n1.y - n2.y;

		double len = vx * vx + vy * vy;

		if (len == 0) {

		    dx += Math.random();

		    dy += Math.random();

		} else if (len &lt; 100*100) {

		    dx += vx / len;

		    dy += vy / len;

		}

	    }

	    double dlen = dx * dx + dy * dy;

	    if (dlen &gt; 0) {

		dlen = Math.sqrt(dlen) / 2;

		n1.dx += dx / dlen;

		n1.dy += dy / dlen;

	    }

	}



	Dimension d = size();

	for (int i = 0 ; i &lt; nnodes ; i++) {

	    Node n = nodes[i];

	    if (!n.fixed) {

		n.x += Math.max(-5, Math.min(5, n.dx));

		n.y += Math.max(-5, Math.min(5, n.dy));

		//System.out.println("v= " + n.dx + "," + n.dy);

		if (n.x &lt; 0) {

		    n.x = 0;

		} else if (n.x &gt; d.width) {

		    n.x = d.width;

		}

		if (n.y &lt; 0) {

		    n.y = 0;

		} else if (n.y &gt; d.height) {

		    n.y = d.height;

		}

	    }

	    n.dx /= 2;

	    n.dy /= 2;

	}

	repaint();

    }



    Node pick;

    boolean pickfixed;

    Image offscreen;

    Dimension offscreensize;

    Graphics offgraphics;

    



    final Color fixedColor = Color.red;

    final Color selectColor = Color.pink;

    final Color edgeColor = Color.black;

    final Color nodeColor = new Color(250, 220, 100);

    final Color stressColor = Color.gray;

    final Color arcColor1 = Color.black;

    final Color arcColor2 = Color.pink;

    final Color arcColor3 = Color.red;



    public void paintNode(Graphics g, Node n, FontMetrics fm) {

	int x = (int)n.x;

	int y = (int)n.y;

	g.setColor((n == pick) ? selectColor : (n.fixed ? fixedColor : nodeColor));

	int w = fm.stringWidth(n.lbl) + 10;

	int h = fm.getHeight() + 4;

	g.fillRect(x - w/2, y - h / 2, w, h);

	g.setColor(Color.black);

	g.drawRect(x - w/2, y - h / 2, w-1, h-1);

	g.drawString(n.lbl, x - (w-10)/2, (y - (h-4)/2) + fm.getAscent());

    }



    public synchronized void update(Graphics g) {

	Dimension d = size();

	if ((offscreen == null) || (d.width != offscreensize.width) || (d.height != offscreensize.height)) {

	    offscreen = createImage(d.width, d.height);

	    offscreensize = d;

	    offgraphics = offscreen.getGraphics();

	    offgraphics.setFont(getFont());

	}



	offgraphics.setColor(getBackground());

	offgraphics.fillRect(0, 0, d.width, d.height);

	for (int i = 0 ; i &lt; nedges ; i++) {

	    Edge e = edges[i];

	    int x1 = (int)nodes[e.from].x;

	    int y1 = (int)nodes[e.from].y;

	    int x2 = (int)nodes[e.to].x;

	    int y2 = (int)nodes[e.to].y;

	    int len = (int)Math.abs(Math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2)) - e.len);

	    offgraphics.setColor((len &lt; 10) ? arcColor1 : (len &lt; 20 ? arcColor2 : arcColor3)) ;

	    offgraphics.drawLine(x1, y1, x2, y2);

	    if (stress) {

		String lbl = String.valueOf(len);

		offgraphics.setColor(stressColor);

		offgraphics.drawString(lbl, x1 + (x2-x1)/2, y1 + (y2-y1)/2);

		offgraphics.setColor(edgeColor);

	    }

	}



	FontMetrics fm = offgraphics.getFontMetrics();

	for (int i = 0 ; i &lt; nnodes ; i++) {

	    paintNode(offgraphics, nodes[i], fm);

	}



	g.drawImage(offscreen, 0, 0, null);

    }



    public synchronized boolean mouseDown(Event evt, int x, int y) {

	double bestdist = Double.MAX_VALUE;

	for (int i = 0 ; i &lt; nnodes ; i++) {

	    Node n = nodes[i];

	    double dist = (n.x - x) * (n.x - x) + (n.y - y) * (n.y - y);

	    if (dist &lt; bestdist) {

		pick = n;

		bestdist = dist;

	    }

	}

	pickfixed = pick.fixed;

	pick.fixed = true;

	pick.x = x;

	pick.y = y;

	repaint();

	return true;

    }



    public synchronized boolean mouseDrag(Event evt, int x, int y) {

	pick.x = x;

	pick.y = y;

	repaint();

	return true;

    }



    public synchronized boolean mouseUp(Event evt, int x, int y) {

	pick.x = x;

	pick.y = y;

	pick.fixed = pickfixed;

	pick = null;

	

	repaint();

	return true;

    }



    public void start() {

	relaxer = new Thread(this);

	relaxer.start();

    }

    public void stop() {

	relaxer.stop();

    }

}



public class Graph extends Applet {

    GraphPanel panel;



    public void init() {

	setLayout(new BorderLayout());



	panel = new GraphPanel(this);

	add("Center", panel);

	Panel p = new Panel();

	add("South", p);

	p.add(new Button("Scramble"));

	p.add(new Button("Shake"));

	p.add(new Checkbox("Stress"));

	p.add(new Checkbox("Random"));



	String edges = getParameter("edges");

	for (StringTokenizer t = new StringTokenizer(edges, ",") ; t.hasMoreTokens() ; ) {

	    String str = t.nextToken();

	    int i = str.indexOf('-');

	    if (i &gt; 0) {

		int len = 50;

		int j = str.indexOf('/');

		if (j &gt; 0) {

		    len = Integer.valueOf(str.substring(j+1)).intValue();

		    str = str.substring(0, j);

		}

		panel.addEdge(str.substring(0,i), str.substring(i+1), len);

	    }

	}

	Dimension d = size();

	String center = getParameter("center");

	if (center != null){

	    Node n = panel.nodes[panel.findNode(center)];

	    n.x = d.width / 2;

	    n.y = d.height / 2;

	    n.fixed = true;

	}

    }



    public void start() {

	panel.start();

    }

    public void stop() {

	panel.stop();

    }

    public boolean action(Event evt, Object arg) {

	if (arg instanceof Boolean) {

	    if (((Checkbox)evt.target).getLabel().equals("Stress")) {

		panel.stress = ((Boolean)arg).booleanValue();

	    } else {

		panel.random = ((Boolean)arg).booleanValue();

	    }

	    return true;

	} 

	if ("Scramble".equals(arg)) {

	    play(getCodeBase(), "audio/computer.au");

	    Dimension d = size();

	    for (int i = 0 ; i &lt; panel.nnodes ; i++) {

		Node n = panel.nodes[i];

		if (!n.fixed) {

		    n.x = 10 + (d.width-20)*Math.random();

		    n.y = 10 + (d.height-20)*Math.random();

		}

	    }

	    return true;

	}

	if ("Shake".equals(arg)) {

	    play(getCodeBase(), "audio/gong.au");

	    Dimension d = size();

	    for (int i = 0 ; i &lt; panel.nnodes ; i++) {

		Node n = panel.nodes[i];

		if (!n.fixed) {

		    n.x += 80*Math.random() - 40;

		    n.y += 80*Math.random() - 40;

		}

	    }

	    return true;

	}

	return false;

    }

}

</PRE>

<HR>

<P><A href="index.html">Back to Graph applet page</A></P>

		</TD>

	</TR>

</TABLE>

<h2>Browse More Great Applets ...</h2>	

<!-- applet choser start -->
<BR CLEAR="all">
<TABLE BORDER="1" CELLSPACING="0" CELLPADDING="3" WIDTH="468" BGCOLOR="FFFFE0">
    <tr VALIGN=TOP>
		<td BGCOLOR="#ffffe0" valign=top align="center">
			<a href="/applet_index/"><b>
			<FONT FACE="ARIAL, HELVETICA" SIZE=-1>Applet Index</FONT><br>
			<FONT FACE="ARIAL, HELVETICA" SIZE="-2" style="font-size: 8pt;">(sorted alphabetically)</FONT></b></a><br>
		        <a href="/applet_index/a.html">A</a>
		        <a href="/applet_index/b.html">B</a>
		        <a href="/applet_index/c.html">C</a>
		        <a href="/applet_index/d.html">D</a>
		        <a href="/applet_index/e.html">E</a>
		        <a href="/applet_index/f.html">F</a>
		        <a href="/applet_index/g.html">G</a>
		        <a href="/applet_index/h.html">H</a>
		        <a href="/applet_index/i.html">I</a>
		        <a href="/applet_index/j.html">J</a>
		        <a href="/applet_index/k.html">K</a><br>
		        <a href="/applet_index/l.html">L</a>
		        <a href="/applet_index/m.html">M</a>
		        <a href="/applet_index/n.html">N</a>
		        <a href="/applet_index/o.html">O</a>
		        <a href="/applet_index/p.html">P</a>
		        <a href="/applet_index/q.html">Q</a>
		        <a href="/applet_index/r.html">R</a>
		        <a href="/applet_index/s.html">S</a>
		        <a href="/applet_index/t.html">T</a>
		        <a href="/applet_index/u.html">U</a><br>
		        <a href="/applet_index/v.html">V</a>
		        <a href="/applet_index/w.html">W</a>
		        <a href="/applet_index/x.html">X</a>
		        <a href="/applet_index/y.html">Y</a>
		        <a href="/applet_index/z.html">Z</a>
		        <a href="/applet_index/numbers.html">#s</a>
		</td>
	    <td BGCOLOR="#ffffe0" valign=top align="center">
			<a href="/javasource/"><b>
			<FONT FACE="ARIAL, HELVETICA" SIZE=-1>The Java Source</FONT><br> 
			<FONT FACE="ARIAL, HELVETICA" SIZE="-2" style="font-size: 8pt;">(applets w/source code)</FONT></b></a><br>
		        <a href="/javasource/index.html">A</a>
		        <a href="/javasource/b.html">B</a>
		        <a href="/javasource/c.html">C</a>
		        <a href="/javasource/d.html">D</a>
		        <a href="/javasource/e.html">E</a>
		        <a href="/javasource/f.html">F</a>
		        <a href="/javasource/g.html">G</a>
		        <a href="/javasource/h.html">H</a>
		        <a href="/javasource/i.html">I</a>
		        <a href="/javasource/j.html">J</a>
		        <a href="/javasource/k.html">K</a><br>
		        <a href="/javasource/l.html">L</a>
		        <a href="/javasource/m.html">M</a>
		        <a href="/javasource/n.html">N</a>
		        <a href="/javasource/o.html">O</a>
		        <a href="/javasource/p.html">P</a>
		        <a href="/javasource/q.html">Q</a>
		        <a href="/javasource/r.html">R</a>
		        <a href="/javasource/s.html">S</a>
		        <a href="/javasource/t.html">T</a>
		        <a href="/javasource/u.html">U</a><br>
		        <a href="/javasource/v.html">V</a>
		        <a href="/javasource/w.html">W</a>
		        <a href="/javasource/x.html">X</a>
		        <a href="/javasource/y.html">Y</a>
		        <a href="/javasource/z.html">Z</a>
		</td></tr>
	</table> 
<!-- applet choser stop -->	




<br><br>





<!----------------AD POSITION B -------------------->

<center>



<a target="_blank" href="/event.ng/Type=click&ProfileID=436&RunID=6780&AdID=4788&TagValues=194.208.222.249.314.572.579.619.915&FamilyID=1&GroupID=7&Redirect=http://www.unclaimeddomains.com"><img src="/ads/2000/05/unclaimed-468.gif" border=0 height=60 width=468 alt=""></a>

</center><p>

<!----------------AD POSITION B -------------------->

<center>

<br><br>





<p>

<p>

Copyright &copy; 1999 internet.com Corporation<br>

All Rights Reserved. <a href="http://www.internet.com/corporate/legal.html">Legal Notices.</a>

<BR>

<BR>

<BR>

<A href="http://www.internet.com"><IMG src="http://www.internet.com/images/URL.gif" BORDER=0 WIDTH=134 HEIGHT=20></A>

</center>







</TD>

</TR>

</TABLE>





</BODY>

</HTML>

